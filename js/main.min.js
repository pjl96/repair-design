$(document).ready((function(){var modal=$(".modal"),modalThx=$(".modal-thx"),modalBtn=$("[data-toggle=modal]"),closeBtn=$(".modal__close");modalBtn.on("click",(function(){modal.toggleClass("modal--visible")})),closeBtn.on("click",(function(){modal.removeClass("modal--visible"),modalThx.removeClass("modal-thx--visible")})),$(document).keydown((function(e){27===e.keyCode&&modal.removeClass("modal--visible"),27===e.keyCode&&modalThx.removeClass("modal-thx--visible")})),$(modal).mouseup((function(e){var modalDialog=$(".modal__dialog");modalDialog.is(e.target)||0!==modalDialog.has(e.target).length||modal.removeClass("modal--visible")})),$(modalThx).mouseup((function(e){var modalDialogThx=$(".modal-thx__dialog");modalDialogThx.is(e.target)||0!==modalDialogThx.has(e.target).length||modalThx.removeClass("modal-thx--visible")})),$((function(){$(window).scroll((function(){$(window).scrollTop()>800?$(".scroll-top__btn").show():$(".scroll-top__btn").hide()})),$(".scroll-top__btn").click((function(){return $("html, body").animate({scrollTop:0},900),!1}))}));var mySwiper=new Swiper(".swiper-container",{loop:!0,pagination:{el:".swiper-pagination",type:"bullets"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),next=$(".swiper-button-next"),prev=$(".swiper-button-prev"),bullets=$(".swiper-pagination");next.css("left",prev.width()+30+bullets.width()+30),bullets.css("left",prev.width()+30),wow=new WOW({mobile:!1}).init(),$(".modal__form").validate({errorClass:"invalid",errorElement:"div",errorPlacement:function(error,element){if("checkbox"==element.attr("type"))return element.next("label").append(error);error.insertAfter($(element))},rules:{userName:{required:!0,minlength:2},policyCheckbox:"required",userPhone:"required",userEmail:{required:!0,email:!0}},messages:{userName:{required:"Заполните поле",minlength:"Имя не короче двух букв"},policyCheckbox:{required:"Согласие обязательно"},userPhone:"Заполните поле",userEmail:{required:"Заполните поле",email:"Введите корректный email"}},submitHandler:function(form){$.ajax({type:"POST",url:"send-modal.php",data:$(form).serialize(),success:function(response){return $(form)[0].reset(),modal.removeClass("modal--visible"),modalThx.addClass("modal-thx--visible"),ym(61344025,"reachGoal","form"),!0}})}}),$(".control__form").validate({errorClass:"invalid",errorElement:"div",errorPlacement:function(error,element){if("checkbox"==element.attr("type"))return element.next("label").append(error);error.insertAfter($(element))},rules:{userName:{required:!0,minlength:2},userPhone:"required",policyCheckbox:"required"},messages:{userName:{required:"Заполните поле",minlength:"Имя не короче двух букв"},policyCheckbox:"Согласие обязательно",userPhone:"Заполните поле"},submitHandler:function(form){$.ajax({type:"POST",url:"send-control.php",data:$(form).serialize(),success:function(response){return $(form)[0].reset(),modalThx.addClass("modal-thx--visible"),ym(61344025,"reachGoal","form"),!0}})}}),$(".footer__form").validate({errorClass:"invalid",errorElement:"div",errorPlacement:function(error,element){if("checkbox"==element.attr("type"))return element.next("label").append(error);error.insertAfter($(element))},rules:{userName:{required:!0,minlength:2},policyCheckbox:"required",userPhone:"required",userQuestion:{required:!0}},messages:{userName:{required:"Заполните поле",minlength:"Имя не короче двух букв"},policyCheckbox:"Согласие обязательно",userPhone:"Заполните поле",userQuestion:"Задайте вопрос"},submitHandler:function(form){$.ajax({type:"POST",url:"send-footer.php",data:$(form).serialize(),success:function(response){return $(form)[0].reset(),modalThx.addClass("modal-thx--visible"),ym(61344025,"reachGoal","form"),!0}})}}),$("[type=tel]").mask("+7 (000) 000-00-00"),[].forEach.call(document.querySelectorAll("img[data-src]"),(function(img){img.setAttribute("src",img.getAttribute("data-src")),img.onload=function(){img.removeAttribute("data-src")}}));var anim=$(".project__title"),player;function videoPlay(event){event.target.playVideo()}$(window).scroll((function(){$(window).scrollTop()<=$(anim).offset().top&&anim.addClass("my-anim")})),$(".menu__nav").on("click","a",(function(event){event.preventDefault();var id=$(this).attr("href"),top=$(id).offset().top;$("body,html").animate({scrollTop:top-100},1e3)})),$(".hero__scroll-down").on("click",(function(event){event.preventDefault();var id=$(this).attr("href"),top=$(id).offset().top;$("body,html").animate({scrollTop:top-100},1e3)})),$(".video__play").on("click",(function onYouTubeIframeAPIReady(){player=new YT.Player("player",{height:"100%",width:"100%",videoId:"vdcPxNS27rM",events:{onReady:videoPlay}})}));var spinner=$(".ymap-container").children(".loader"),check_if_load=!1,myMapTemp,myPlacemarkTemp;function init(){var myMapTemp=new ymaps.Map("map",{center:[47.244729,39.723187],zoom:16,controls:["zoomControl","fullscreenControl"]}),myPlacemarkTemp=new ymaps.Placemark(myMapTemp.getCenter(),{hintContent:"Наш офис",balloonContent:"Вход со двора"},{iconLayout:"default#image",iconImageHref:"img/marker.png",iconImageSize:[32,32],iconImageOffset:[-5,-38]}),layer;myMapTemp.geoObjects.add(myPlacemarkTemp),waitForTilesLoad(myMapTemp.layers.get(0).get(0)).then((function(){spinner.removeClass("is-active")}))}function waitForTilesLoad(layer){return new ymaps.vow.Promise((function(resolve,reject){var tc=getTileContainer(layer),readyAll=!0;tc.tiles.each((function(tile,number){tile.isReady()||(readyAll=!1)})),readyAll?resolve():tc.events.once("ready",(function(){resolve()}))}))}function getTileContainer(layer){for(var k in layer)if(layer.hasOwnProperty(k)&&(layer[k]instanceof ymaps.layer.tileContainer.CanvasContainer||layer[k]instanceof ymaps.layer.tileContainer.DomContainer))return layer[k];return null}function loadScript(url,callback){var script=document.createElement("script");script.readyState?script.onreadystatechange=function(){"loaded"!=script.readyState&&"complete"!=script.readyState||(script.onreadystatechange=null,callback())}:script.onload=function(){callback()},script.src=url,document.getElementsByTagName("head")[0].appendChild(script)}var ymap=function(){$(".ymap-container").mouseenter((function(){check_if_load||(check_if_load=!0,spinner.addClass("is-active"),loadScript("https://api-maps.yandex.ru/2.1/?apikey=1d75a2ac-e4dd-445e-bd66-4043c00de24b&lang=ru_RU",(function(){ymaps.load(init)})))}))};$((function(){ymap()}))}));